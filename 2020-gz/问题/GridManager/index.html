<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="gm.css">
</head>
<body>
    <div style="min-width:800px">
        <table id='table-demo-customizeCode'></table>
    </div>
</body>
<script src="gm.js"></script>  
<script>
    
    var data=`{
    "status": "success",
    "totals": 97,
    "data": [
        {
            "id": 9,
            "author": "33",
            "praiseNumber": "0",
            "status": 1,
            "readNumber": 146,
            "pic": "/upload/blog/pic/2936_listManager.png",
            "title": "listManager使用详解",
            "subtitle": "",
            "type": 3,
            "info": "适用于管理平台的数据展示列表，通过该插件可以更简约的实现一些前端交互及与列表相关的功能实现。",
            "createDate": 1460364938000,
            "lastDate": 1460365932827,
            "commentSum": 1,
            "username": "写个程序换个饼",
            "photo": "/upload/user/photo/8495_1.jpg"
        },
        {
            "id": 8,
            "author": "33",
            "praiseNumber": "0",
            "status": 1,
            "readNumber": 311,
            "pic": "/upload/blog/pic/9870_1594621862038.png",
            "title": "margin-top 外边距合并",
            "subtitle": "css",
            "type": 1,
            "info": "margin-top 外边距合并的边距合并的触发条件及解决方式",
            "createDate": 1457330074000,
            "lastDate": 1594621873579,
            "commentSum": 3,
            "username": "写个程序换个饼",
            "photo": "/upload/user/photo/8495_1.jpg"
        },
        {
            "id": 7,
            "author": "33",
            "praiseNumber": "0",
            "status": 1,
            "readNumber": 714,
            "pic": "/upload/blog/pic/5120_1594621430986.png",
            "title": "JSON.stringify()执行出错",
            "subtitle": "js",
            "type": 3,
            "info": "执行JSON.stringify() 抛出的错误信息：Uncaught TypeError: Converting circular structure to JSON",
            "createDate": 1456402852000,
            "lastDate": 1594621479023,
            "commentSum": 5,
            "username": "写个程序换个饼",
            "photo": "/upload/user/photo/8495_1.jpg"
        },
        {
            "id": 6,
            "author": "33",
            "praiseNumber": "0",
            "status": 1,
            "readNumber": 434,
            "pic": "/upload/blog/pic/3327_1594621385587.jpg",
            "title": "前端国际化",
            "subtitle": "国际化",
            "type": 3,
            "info": "从10年接触编程就开始接触国际化这个概念，这些年项目中做到国际化的项目并不是很多，零星项目中做的都是无非也都是螺丝钉的工作。15年末，部门项目需要推国际化，前端这块由我来主导。虽然难度不高，但还是拿出来分享下。",
            "createDate": 1456314006000,
            "lastDate": 1594621388566,
            "commentSum": 7,
            "username": "写个程序换个饼",
            "photo": "/upload/user/photo/8495_1.jpg"
        },
        {
            "id": 4,
            "author": "33",
            "praiseNumber": "0",
            "status": 1,
            "readNumber": 164,
            "pic": "/upload/blog/pic/7373_1.jpg",
            "title": "UEdit 使用总结",
            "subtitle": "",
            "type": 3,
            "info": "最近项目中频繁使用到 uedit，在使用中遇到一些磕磕绊绊的事。",
            "createDate": 1404187620000,
            "lastDate": 1456320676925,
            "commentSum": 0,
            "username": "写个程序换个饼",
            "photo": "/upload/user/photo/8495_1.jpg"
        },
        {
            "id": 5,
            "author": "33",
            "praiseNumber": "0",
            "status": 1,
            "readNumber": 210,
            "pic": "/upload/blog/pic/9819_2.jpg",
            "title": "自定义表单、流程、菜单开发总结",
            "subtitle": "",
            "type": 3,
            "info": "最近在做自定义表单、自定义流程、自定义菜单，由于某些原因，现在这个项目正处于停滞状态。但核心功能已实现，做点总结拿出来分享。",
            "createDate": 1403323560000,
            "lastDate": 1456320687638,
            "commentSum": 5,
            "username": "写个程序换个饼",
            "photo": "/upload/user/photo/8495_1.jpg"
        }
    ]
    }`;
    


    
    
    // new GridManager(table, {
    //      // 这里使用上面的声明好的responseData变量
    //     // ...其它配置项
    // });
    function box_form(box_id,responseData){
        function tmp(pic,responseData){
            var picNode = document.createElement('div');
            picNode.innerText=responseData.data[0]["title_1"];
            return picNode;
            // console.log("responseData",responseData);
            // for(let i=0;i<responseData.data.length;i++){
            //     for(let j=0;j<responseData.data[i].length;j++){
                   
            //     }   
            // }
            
        }
        var sum=[];
        for(let i=0;i<responseData.title.length;i++){
            var sum_json={}
            // for(let j=0;j<responseData.data.length;j++){
            //     console.log(responseData.data[j]);
            // }
            sum_json["key"]=responseData.title[i];
            sum_json["text"]=responseData.title[i];
            sum_json["align"]='center';
            sum_json["width"]=responseData.title_width[i];
            sum_json["template"]=tmp(sum_json["key"],responseData);
            sum.push(sum_json);
            //console.log(responseData.title[i]);
        }
        console.log("sum",sum);
        document.querySelector(box_id).GM({
            ajaxData: responseData,
            gridManagerName: box_id,
            // ajaxData: 'http://127.0.0.1:9998',
            // ajaxType: 'GET',
            //query: {pluginId: 1},
            // pageSize:10,
            //supportAjaxPage: true,
            // supportAdjust: false,
            // supportDrag: false,
            columnData: sum
            // [
            //     {
            //         key:"标题",
            //         text: '测试标题1',
            //         align: 'center',
            //         width: '100px',
            //         template:function(cell, row, index, key){
            //             // console.log("cell",cell);
            //             // console.log("row",row);
            //             // console.log("index",index);
            //             // console.log("key",key);
            //             // console.log("responseData",responseData)
            //             // return rowData.url;
            //             // console.log("l_content",l_content);
            //             // console.log("rowObject",rowObject);
            //             var picNode = document.createElement('div');
            //             picNode.innerText=cell;
            //             return picNode;
            //         }
            //     },
            //     {
            //         key: 'pic',
            //         remind: 'the pic',
            //         width: '110px',
            //         align: 'center',
            //         text: '缩略图',
            //         // 使用函数返回 dom node
            //         template: function(pic, rowObject) {
            //            // console.log("pic",pic);
            //             var picNode = document.createElement('a');
            //             //console.log("rowObject",rowObject);
            //             // console.log(JSON.parse(rowObject));
            //             //console.log("rowObject",rowObject.id);
            //             picNode.setAttribute('href', 'https://www.lovejavascript.com/#!zone/blog/content.html?id='+rowObject.id);
            //             picNode.setAttribute('title', rowObject.title);
            //             picNode.setAttribute('target', '_blank');
            //             picNode.title = '点击阅读['+rowObject.title+']';
            //             picNode.style.display = 'block';
            //             picNode.style.height = '68.5px';

            //             var imgNode = document.createElement('img');
            //             imgNode.style.width = '100px';
            //             imgNode.style.padding = '5px';
            //             imgNode.style.margin = '0 auto';
            //             imgNode.alt = rowObject.title;
            //             imgNode.src = 'https://www.lovejavascript.com/'+pic;

            //             picNode.appendChild(imgNode);
            //             return picNode;
            //         }
            //     },{
            //         key: 'title',
            //         remind: 'the title',
            //         align: 'left',
            //         text: '标题',
            //         // 使用函数返回 dom node
            //         template: function(title, rowObject) {
            //            // console.log("title",title);
            //             var titleNode = document.createElement('a');
            //             titleNode.setAttribute('href', 'https://www.lovejavascript.com/#!zone/blog/content.html?id='+rowObject.id);
            //             titleNode.setAttribute('title', title);
            //             titleNode.setAttribute('target', '_blank');
            //             titleNode.innerText = title;
            //             titleNode.title = '点击阅读['+rowObject.title+']';
            //             titleNode.classList.add('plugin-action');
            //             return titleNode;
            //         }
            //     },{
            //         key: 'type',
            //         remind: 'the type',
            //         text: '博文分类',
            //         width: '130px',
            //         align: 'center',
            //         // 使用函数返回 htmlString
            //         template: function(type, rowObject){
            //             // 博文类型
            //             console.log("type",type);
            //             console.log("rowObject",rowObject);
            //             const TYPE_MAP = {
            //                 '1': 'HTML/CSS',
            //                 '2': 'nodeJS',
            //                 '3': 'javaScript',
            //                 '4': '前端鸡汤',
            //                 '5': 'PM Coffee',
            //                 '6': '前端框架',
            //                 '7': '前端相关'
            //             };
            //             return TYPE_MAP[type];
            //         }
            //     },
            //     {
            //         key: 'createDate',
            //         width: '130px',
            //         text: '创建时间',
            //         // 使用函数返回 htmlString
            //         template: function(createDate, rowObject){
            //             return new Date(createDate).toLocaleDateString();
            //         }
            //     }
            // ]
        });
    }

    var box_id='#table-demo-customizeCode';
    var responseData = {
        "title":["标题1","标题2","标题3","标题4","标题5","标题6","标题7"],
        "title_width":["130px","130px","130px","130px","130px","130px","130px"],
        "data":[
            {
                "title_1": "baukh1",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            },
            {
                "title_1": "baukh2",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            },
            {
                "title_1": "baukh3",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            },
            {
                "title_1": "baukh4",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            },
            {
                "title_1": "baukh5",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            }
            ,
            {
                "title_1": "baukh6",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            }
            ,
            {
                "title_1": "baukh7",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            }
            ,
            {
                "title_1": "baukh8",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            }
            ,
            {
                "title_1": "baukh9",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            }
            ,
            {
                "title_1": "baukh10",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            }
            ,
            {
                "title_1": "baukh11",
                "title_2": "28",
                "title_3": "2015-03-12",
                "title_4": "野生前端程序",
                "title_5": "野生前端程序",
                "title_6": "野生前端程序",
                "title_7": "修改"
            }
        ],
          // 分页必须存在的属性， 属性名可通过配置项totalsKey进行变更
    }
    box_form(box_id,responseData);
</script>
</html>